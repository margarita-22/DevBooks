# [22-05-09] Clean Code 3, 7장 TIL

생성일: 2022년 5월 9일 오전 1:14
태그: 스터디

# Clean Code 3, 7장

- 2022-05-09
    - 3장 함수 , 7장 오류처리

**책에서 기억하고 싶은 내용을 써보세요.**

- 함수를 만들기 위한 규칙
    1. 작게 만들기
        - 블록과 들여쓰기
            - 중첩 구조가 생길만큼 함수가 커져서는 안된다.
    2. 한 가지만 하기
        - 함수는 한 가지를 해야한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야한다.
    3. 함수 당 추상화 수준은 하나로
        - 한 함수 내에 추상화 수준을 섞으면 코드를 읽는 사람이 헷갈린다.
    4. 내려가기 규칙
        - 위에서 아래로 내려갈수록 추상화 수준이 낮은 함수가 오도록, (45p 코드 아래로 내려갈수록 추상화 수준을 낮추는 것에 대한 묘사)
    5. Switch 문은 다형성 또는 추상팩토리를 사용하라. 
    6. 서술적인 이름을 사용하라
        - 좋은 이름이 주는 가치
        - 코드를 읽으면서 짐작했던 기능을 각 루틴이 그대로 수행한다면 깨끗한 코드라 불러도 되겠다.
    7. 함수 인수
        - 이상적인 개수 : 0개, → 1개 → 2개 → 3항은 피하는 것이 좋다. 4개이상 (다항)은 특별한 이유가 필요하다. 특별한 이유가 있어도 사용하면 안 된다.
        - 플래그 인수.. X
        - 인수가 2-3개 필요하다면 일부를 독자적인 클래스 변수로 선언할 가능성을 짚어본다.
    8. 부수효과를 일으키지 마라. 
        - 함수로 넘어온 인수나 시스템 전역변수를 수정한다.
            - 수정으로 인해 부수효과가 발생하면 안된다.
    9. 오류 코드보다 예외를 사용하다. 
        - try/catch 블록 뽑아내기
            - try/catch 문에서 다른 함수를 호출한다.
- try-catch-finally 문부터 작성하라
    - 범위를 정의한다.
- 미확인 예외를 사용하라.
    - 확인된 오류가 치르는 비용에 상응하는 이익을 제공하는 지
- 예외에 의미를 제공하라.
    - 전후 상황을 충분히 덧붙여 오류 원인과 위치를 찾는 데 보충할 것.
- 호출자를 고려해 예외 클래스를 정의하라.
    - 감싸는 클래스를 사용
        - 외부 api를 사용할 때는 감싸는 클래스를 사용하여 외부 라이브러리와 프로그램 사이의 의존성을 줄인다.
- 정상 흐름을 정의하라
- null을 반환하는 습관을 없앨 것 / null을 전달하지 말 것

**오늘 읽은 소감은? 떠오르는 생각을 가볍게 적어보세요**

- 전체적으로 함수 부분은 어렵게 느껴졌다. 개발하면서 신경을 제대로 쓰지 못했던 부분이라 읽으면서도 생각할 것이 많아졌고, 적용해본적이 없다보니 글과 코드를 읽으면서 이해가 잘 되지 않기도 했다.
- 함수를 길게 만드는 점은 계속 고민되는 문제였다. 나는 처음부터 짧게 함수를 만들어내려고 했기 때문에 문제를 해결하지 못했던 것 같다. 그게 어려우니 다 작성하고, 중복을 찾아내어 제거하고, 한가지 기능만 하는 함수를 만들어 코드를 정리하자.
    - 만들 때는 귀찮거나 복잡했지만, 작게 나누어 놓은 함수를 사용한 소스는 나중에 다시 볼 때 함수가 하는 기능을 보러 왔다 갔다 하기는 귀찮지만 소스를 이해하는 것은 더욱 쉬웠다.
    - 반면 길게 만들어진 함수는 귀찮지는 않았지만 다시 보고 다시 이해하는 데 똑같이 시간이 걸렸던 것 같다.
- 함수로 변경할 때 전달할 게 많으면 냅다 함수 인수를 늘렸던 것이 생각 나 반성.. 많은 인수를 썼어도 뭔지 다 기억이 나는 것도 있긴 하지만 그건 그냥 너무 많이 봐왔기 때문에 그런거고, 다른사람이 보면 이해하지 못할거다.. ;; 기존의 소스를 수정했던 경우는 이걸 지워도 될 지 안될 지 판단하지 못해 인수를 덧붙이다 무한 인수 급이 된 경우...
    - 코드가 지저분하고 운영은 되고 있는 소스의 경우에는 더더 수정 반영을 하기가 어렵게 느껴진다.
- 추상화 단계를 동일하게 처리할 것. 하나의 함수는 한 가지만 할 것.
- OCP ::: 확장성을 늘 생각하고 설계를 해야함.. 몇 번 수정을 거치고 나서는 나름 신경을 쓴다고는 하는데, 정답이 뭔지 예제가 뭔지를 모르니 뭐가 맞는 지를 모르겠다.. 이것도 마찬가지로 함수를 작게 작성하면 그래도 영향이 덜 가지 않을까 싶은 생각..
- null 관련해서 문자열 비교를 할 때. “”.equals(변수) 가 눈에 띄었다.
- null을 넘기지 못하도록 금지하는 정책 -? 소스 단에서 자체적으로 처리하는 것인지 ? 어떻게 처리해야하는 것일 지 고민이 되었다.
- 깨끗한 코드는 읽기도 좋아야 하지만 안정성도 높아야 한다 - 이 둘은 상충하는 목표가 아니다. → 읽기 좋은 코드를 만들기 위해 소스 구조를 생각하고, 변화를 주는 과정에서 계속해서 테스트를 거치고, 깨지지 않게 하려고 노력하게 되는 방향이 아닐까 함.

**궁금한 내용이 있거나, 잘 이해되지 않는 내용이 있다면 적어보세요.**

- 추상팩토리 (Abstract factory)
    - [https://victorydntmd.tistory.com/300](https://victorydntmd.tistory.com/300)
    - 팩토리 메서드 패턴을 좀 더 캡슐화한 방식
        - 객체 생성 처리를 서브 클래스로 분리 해 처리하도록 캡슐화하는 패턴
        [https://gmlwjd9405.github.io/2018/08/07/factory-method-pattern.html](https://gmlwjd9405.github.io/2018/08/07/factory-method-pattern.html)
- SRP : 한 클래스는 하나의 책임을 가진다.
- 134p 확인된 오류를 던진다면 함수는 선언부에  throws절을 추가해야 한다. 아래쪽
- 특수사례패턴
    - 클래스를 만들거나 객체를 조작해 특수 사례를 처리하는 방식이다. 그러면 클라이언트 코드가 예외적인 상황을 처리할 필요가 없어진다. 왜냐하면 클래스나 객체가 상황을 캡슐화해서 처리하기 때문이다.
- assert 문?
    - assert 함수는 true면 진행, expression이 0, 즉 false 가 되면 프로그램을 중단 시키고 에러 로그를 띄워준다.
    - java: [https://offbyone.tistory.com/294](https://offbyone.tistory.com/294)
    - c: 함수내에서 사용하여 null pointer 나 예상할수 있는 다양한 버그를 미연에 잡아내기 위해 사용하며, [#include](https://m.blog.naver.com/BlogTagView.naver?blogId=wns7756&pushNavigation=true&tagName=include) <assert.h> 를 선언하기 전에 [#define](https://m.blog.naver.com/BlogTagView.naver?blogId=wns7756&pushNavigation=true&tagName=define) NDEBUG 를 선언해 주면 파일 내에 있는 assert 함수를 비활성화 시킬수 있다.
- OCP(Open Closed Principle) :  기존 코드를 변경하지 않으면서 기능을 추가할 수 있도록 설계.

객체지향 설계의 5원칙

[https://inuplace.tistory.com/938](https://inuplace.tistory.com/938)

[https://sjh836.tistory.com/159](https://sjh836.tistory.com/159)